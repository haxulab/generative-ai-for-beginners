
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../../../08-building-search-applications/translations/cn/">
      
      
        <link rel="next" href="../../../10-building-low-code-ai-applications/translations/cn/">
      
      
      <link rel="icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.46">
    
    
      
        <title>第九章：构建图像生成应用 - 面向初学者的生成式AI课程</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.6f8fc17f.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#_1" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="面向初学者的生成式AI课程" class="md-header__button md-logo" aria-label="面向初学者的生成式AI课程" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            面向初学者的生成式AI课程
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              第九章：构建图像生成应用
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="面向初学者的生成式AI课程" class="md-nav__button md-logo" aria-label="面向初学者的生成式AI课程" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    面向初学者的生成式AI课程
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../translations/cn/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    面向初学者的生成式人工智能课程 ( Version 3 )
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../00-course-setup/translations/cn/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    课程介绍和学习环境设置
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../01-introduction-to-genai/translations/cn/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    第一章 : 生成式人工智能和 LLMs 介绍
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../02-exploring-and-comparing-different-llms/translations/cn/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    第二章 : 探索和比较不同的 LLMs
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../03-using-generative-ai-responsibly/translations/cn/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    第三章 ： 负责任地使用生成式人工智能
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../04-prompt-engineering-fundamentals/translations/cn/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    第四章：提示工程基础
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../05-advanced-prompts/translations/cn/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    第五章：创建高级的提示工程技巧
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../06-text-generation-apps/translations/cn/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    第六章：创建文本生成应用
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../07-building-chat-applications/translations/cn/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    第七章：创建聊天应用
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../08-building-search-applications/translations/cn/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    第八章：创建搜索应用
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    第九章：构建图像生成应用
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    第九章：构建图像生成应用
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    <span class="md-ellipsis">
      本章概述
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    <span class="md-ellipsis">
      学习目标
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    <span class="md-ellipsis">
      为什么要构建图像生成应用程序？
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#edu4all" class="md-nav__link">
    <span class="md-ellipsis">
      场景 Edu4All
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dall-e-midjourney" class="md-nav__link">
    <span class="md-ellipsis">
      什么是 DALL-E 和 Midjourney？
    </span>
  </a>
  
    <nav class="md-nav" aria-label="什么是 DALL-E 和 Midjourney？">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#dall-e" class="md-nav__link">
    <span class="md-ellipsis">
      DALL-E
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#midjourney" class="md-nav__link">
    <span class="md-ellipsis">
      Midjourney
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dall-e-midjourney_1" class="md-nav__link">
    <span class="md-ellipsis">
      DALL-E 和 Midjourney 如何运作
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    <span class="md-ellipsis">
      构建您的第一个图像生成应用程序
    </span>
  </a>
  
    <nav class="md-nav" aria-label="构建您的第一个图像生成应用程序">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    <span class="md-ellipsis">
      有关生成图像的更多详细信息
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_7" class="md-nav__link">
    <span class="md-ellipsis">
      图像生成的附加功能
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#temperature" class="md-nav__link">
    <span class="md-ellipsis">
      Temperature
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Temperature">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#temperature_1" class="md-nav__link">
    <span class="md-ellipsis">
      改变 temperature
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_8" class="md-nav__link">
    <span class="md-ellipsis">
      如何使用元提示定义应用程序的边界
    </span>
  </a>
  
    <nav class="md-nav" aria-label="如何使用元提示定义应用程序的边界">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_9" class="md-nav__link">
    <span class="md-ellipsis">
      它是如何工作的？
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#-" class="md-nav__link">
    <span class="md-ellipsis">
      作业 - 让我们帮助学生
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_10" class="md-nav__link">
    <span class="md-ellipsis">
      解决方案
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_11" class="md-nav__link">
    <span class="md-ellipsis">
      继续学习
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../10-building-low-code-ai-applications/translations/cn/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    第十章：创建低代码的人工智能应用
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../11-integrating-with-function-calling/translations/cn/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    第十一章：为生成式 AI 添加 function calling
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../12-designing-ux-for-ai-applications/translations/cn/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    第十二章：为人工智能应用程序添加用户体验
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../13-securing-ai-applications/translations/cn/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    生成式 AI 初学者指南：第 13 章 - 保护 AI 应用
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../14-the-generative-ai-application-lifecycle/translations/cn/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Index
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../15-rag-and-vector-databases/translations/cn/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    检索增强生成 (RAG) 与向量数据库
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../16-open-source-models/translations/tw/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Index
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../17-ai-agents/translations/tw/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Index
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../18-fine-tuning/translations/tw/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Index
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../19-slm/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Introduction to Small Language Models for Generative AI for Beginners
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../20-mistral/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Building with Mistral Models
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../21-meta/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Building With the Meta Family Models
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    <span class="md-ellipsis">
      本章概述
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    <span class="md-ellipsis">
      学习目标
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    <span class="md-ellipsis">
      为什么要构建图像生成应用程序？
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#edu4all" class="md-nav__link">
    <span class="md-ellipsis">
      场景 Edu4All
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dall-e-midjourney" class="md-nav__link">
    <span class="md-ellipsis">
      什么是 DALL-E 和 Midjourney？
    </span>
  </a>
  
    <nav class="md-nav" aria-label="什么是 DALL-E 和 Midjourney？">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#dall-e" class="md-nav__link">
    <span class="md-ellipsis">
      DALL-E
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#midjourney" class="md-nav__link">
    <span class="md-ellipsis">
      Midjourney
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dall-e-midjourney_1" class="md-nav__link">
    <span class="md-ellipsis">
      DALL-E 和 Midjourney 如何运作
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    <span class="md-ellipsis">
      构建您的第一个图像生成应用程序
    </span>
  </a>
  
    <nav class="md-nav" aria-label="构建您的第一个图像生成应用程序">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    <span class="md-ellipsis">
      有关生成图像的更多详细信息
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_7" class="md-nav__link">
    <span class="md-ellipsis">
      图像生成的附加功能
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#temperature" class="md-nav__link">
    <span class="md-ellipsis">
      Temperature
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Temperature">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#temperature_1" class="md-nav__link">
    <span class="md-ellipsis">
      改变 temperature
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_8" class="md-nav__link">
    <span class="md-ellipsis">
      如何使用元提示定义应用程序的边界
    </span>
  </a>
  
    <nav class="md-nav" aria-label="如何使用元提示定义应用程序的边界">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_9" class="md-nav__link">
    <span class="md-ellipsis">
      它是如何工作的？
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#-" class="md-nav__link">
    <span class="md-ellipsis">
      作业 - 让我们帮助学生
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_10" class="md-nav__link">
    <span class="md-ellipsis">
      解决方案
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_11" class="md-nav__link">
    <span class="md-ellipsis">
      继续学习
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="_1">第九章：构建图像生成应用</h1>
<p><a href="https://aka.ms/gen-ai-lesson9-gh?WT.mc_id=academic-105485-koreyst"><img alt="Building Image Generation Applications" src="../../images/09-lesson-banner.png?WT.mc_id=academic-105485-koreyst" /></a></p>
<p>LLMs 不仅仅是文本生成。 还可以根据文本描述生成图像。 将图像作为一种模式在医疗科技、建筑、旅游、游戏开发等许多领域非常有用。 在本章中，我们将研究两种最流行的图像生成模型：DALL-E 和 Midjourney。</p>
<h2 id="_2">本章概述</h2>
<p>在本章中，您将学习到：</p>
<ul>
<li>图像生成及其有用的原因。</li>
<li>DALL-E 和 Midjourney，它们是什么以及它们如何工作。</li>
<li>如何构建图像生成应用程序。</li>
</ul>
<h2 id="_3">学习目标</h2>
<p>在完成本章的学习，您将能够：</p>
<ul>
<li>构建图像生成应用程序。</li>
<li>使用元提示定义应用程序的边界。</li>
<li>使用 DALL-E 和 Midjourney</li>
</ul>
<h2 id="_4">为什么要构建图像生成应用程序？</h2>
<p>图像生成应用程序是探索生成式人工智能功能的好方法。 它们可用于，例如：</p>
<ul>
<li>
<p><strong>图像编辑和合成</strong>。 您可以为各种用例生成图像，例如图像编辑和图像合成。</p>
</li>
<li>
<p><strong>适用于多种行业</strong>。 它们还可以用于为医疗科技、旅游、游戏开发等各种行业生成图像。</p>
</li>
</ul>
<h2 id="edu4all">场景 Edu4All</h2>
<p>作为本章的一部分，我们将在本章中继续与 "Our Startup" Edu4All 合作。 学生将为他们的评估创建图像，具体图像由学生决定，但它们可以是他们自己的童话故事的插图，或者为他们的故事创建一个新角色，或者帮助他们形象化他们的想法和概念。</p>
<p>例如，如果 Edu4All 的学生在课堂上研究纪念碑，他们可以生成以下内容：</p>
<p><img alt="Edu4All startup, class on monuments, Eiffel Tower" src="../../images/startup.png?WT.mc_id=academic-105485-koreyst" /></p>
<p>提示词如下</p>
<blockquote>
<p>"Dog next to Eiffel Tower in early morning sunlight"</p>
</blockquote>
<h2 id="dall-e-midjourney">什么是 DALL-E 和 Midjourney？</h2>
<p><a href="https://openai.com/dall-e-2">DALL-E</a> 和 <a href="https://www.midjourney.com/?WT.mc_id=academic-105485-koreyst">Midjourney</a> 是两种最流行的图像生成模型，它们允许您使用提示词生成图像。</p>
<h3 id="dall-e">DALL-E</h3>
<p>让我们从 DALL-E 开始，它是一种生成式 AI 模型，可以根据文本描述生成图像。</p>
<blockquote>
<p>[DALL-E 是 CLIP 和 diffused attention 两种模型的组合]
(https://towardsdatascience.com/openais-dall-e-and-clip-101-a-brief-introduction-3a4367280d4e)。</p>
</blockquote>
<ul>
<li>
<p><strong>CLIP</strong>，是一种从图像和文本生成嵌入的模型，嵌入是数据的数字表示。</p>
</li>
<li>
<p><strong>diffused attention</strong>，是一种从嵌入生成图像的模型。 DALL-E 在图像和文本数据集上进行训练，可用于从文本描述生成图像。 例如，DALL-E 可用于生成戴帽子的猫或留着莫霍克发型的狗的图像。</p>
</li>
</ul>
<h3 id="midjourney">Midjourney</h3>
<p>Midjourney 的工作方式与 DALL-E 类似，它根据文本提示生成图像。 Midjourney 还可以用于使用“戴帽子的猫”或“莫西干狗”等提示来生成图像。</p>
<p><img alt="图像由 Midjourney生成，机械鸽子" src="https://upload.wikimedia.org/wikipedia/commons/thumb/8/8c/Rupert_Breheny_mechanical_dove_eca144e7-476d-4976-821d-a49c408e4f36.png/440px-Rupert_Breheny_mechanical_dove_eca144e7-476d-4976-821d-a49c408e4f36.png?WT.mc_id=academic-105485-koreyst" /></p>
<p><em>图片来源维基百科，图片由 Midjourney 生成</em></p>
<h2 id="dall-e-midjourney_1">DALL-E 和 Midjourney 如何运作</h2>
<p>首先，<a href="https://arxiv.org/pdf/2102.12092.pdf?WT.mc_id=academic-105485-koreyst">DALL-E</a>。 DALL-E 是一种基于带有 <em>autoregressive transformer</em> 的 transformer 架构的生成式人工智能模型。</p>
<p>“autoregressive transformer”定义了模型如何根据文本描述生成图像，它一次生成一个像素，然后使用生成的像素生成下一个像素。 经过神经网络中的多个层，直到图像完整。</p>
<p>通过此过程，DALL-E 可以控制其生成的图像中的属性、对象、特征等。 DALL-E 2 和 3 对生成的图像有更多的控制权，</p>
<h2 id="_5">构建您的第一个图像生成应用程序</h2>
<p>那么构建图像生成应用程序需要什么？ 您需要以下 Library：</p>
<ul>
<li><strong>python-dotenv</strong>，强烈建议您使用此库将您的秘密保存在远离代码的 <em>.env</em> 文件中。</li>
<li><strong>openai</strong>，您将使用该库与 OpenAI API 进行交互。</li>
<li><strong>pillow</strong>，用于在 Python 中处理图像。</li>
<li>
<p><strong>requests</strong>，发出 HTTP 请求。</p>
</li>
<li>
<p>创建一个包含以下内容的文件 <em>.env</em>：</p>
</li>
</ul>
<p><code>text
   AZURE_OPENAI_ENDPOINT=&lt;your endpoint&gt;
   AZURE_OPENAI_API_KEY=&lt;your key&gt;</code></p>
<p>在 Azure 门户中的 "Keys and Endpoint" 部分中找到资源的此信息。</p>
<ol>
<li>将上述库收集到名为 <em>requirements.txt</em> 的文件中，如下所示：</li>
</ol>
<p><code>text
   python-dotenv
   openai
   pillow
   requests</code></p>
<ol>
<li>接下来，创建虚拟环境并安装库：</li>
</ol>
<p><code>bash
   python3 -m venv venv
   source venv/bin/activate
   pip install -r requirements.txt</code></p>
<p>对于 Windows，使用以下命令创建并激活虚拟环境：</p>
<p><code>bash
   python3 -m venv venv
   venv\Scripts\activate.bat</code></p>
<ol>
<li>在名为 <em>app.py</em> 的文件中添加以下代码：</li>
</ol>
<p>```python
   import openai
   import os
   import requests
   from PIL import Image
   import dotenv</p>
<p># import dotenv
   dotenv.load_dotenv()</p>
<p># Get endpoint and key from environment variables
   openai.api_base = os.environ['AZURE_OPENAI_ENDPOINT']
   openai.api_key = os.environ['AZURE_OPENAI_API_KEY']</p>
<p># Assign the API version (DALL-E is currently supported for the 2023-06-01-preview API version only)
   openai.api_version = '2023-06-01-preview'
   openai.api_type = 'azure'</p>
<p>try:
       # Create an image by using the image generation API
       generation_response = openai.Image.create(
           prompt='Bunny on horse, holding a lollipop, on a foggy meadow where it grows daffodils',    # Enter your prompt text here
           size='1024x1024',
           n=2,
           temperature=0,
       )
       # Set the directory for the stored image
       image_dir = os.path.join(os.curdir, 'images')</p>
<pre><code>   # If the directory doesn't exist, create it
   if not os.path.isdir(image_dir):
       os.mkdir(image_dir)

   # Initialize the image path (note the filetype should be png)
   image_path = os.path.join(image_dir, 'generated-image.png')

   # Retrieve the generated image
   image_url = generation_response["data"][0]["url"]  # extract image URL from response
   generated_image = requests.get(image_url).content  # download the image
   with open(image_path, "wb") as image_file:
       image_file.write(generated_image)

   # Display the image in the default image viewer
   image = Image.open(image_path)
   image.show()
</code></pre>
<p># catch exceptions
   except openai.InvalidRequestError as err:
       print(err)</p>
<p>```</p>
<p>我们来解释一下这段代码：</p>
<ul>
<li>首先，我们导入我们需要的 Library ，包括 OpenAI 、dotenv 、requests 和 Pillow。</li>
</ul>
<p><code>python
  import openai
  import os
  import requests
  from PIL import Image
  import dotenv</code></p>
<ul>
<li>接下来，我们从 <em>.env</em> 文件加载环境变量。</li>
</ul>
<p><code>python
  # import dotenv
  dotenv.load_dotenv()</code></p>
<ul>
<li>之后，我们设置 OpenAI API 的 endpoint 、 key 、版本和类型。</li>
</ul>
<p>```python
  # Get endpoint and key from environment variables
  openai.api_base = os.environ['AZURE_OPENAI_ENDPOINT']
  openai.api_key = os.environ['AZURE_OPENAI_API_KEY']</p>
<p># add version and type, Azure specific
  openai.api_version = '2023-06-01-preview'
  openai.api_type = 'azure'
  ```</p>
<ul>
<li>接下来，我们生成图像：</li>
</ul>
<p><code>python
  # Create an image by using the image generation API
  generation_response = openai.Image.create(
      prompt='Bunny on horse, holding a lollipop, on a foggy meadow where it grows daffodils',    # Enter your prompt text here
      size='1024x1024',
      n=2,
      temperature=0,
  )</code></p>
<p>上面的代码返回一个 JSON 对象，其中包含生成图像的 URL。 我们可以使用 URL 下载图像并将其保存到文件中。</p>
<ul>
<li>最后，我们打开图像并使用标准图像查看器来显示它：</li>
</ul>
<p><code>python
  image = Image.open(image_path)
  image.show()</code></p>
<h3 id="_6">有关生成图像的更多详细信息</h3>
<p>让我们更详细地看一下生成图像的代码：</p>
<pre><code class="language-python">generation_response = openai.Image.create(
        prompt='Bunny on horse, holding a lollipop, on a foggy meadow where it grows daffodils',    # Enter your prompt text here
        size='1024x1024',
        n=2,
        temperature=0,
    )
</code></pre>
<ul>
<li><strong>prompt</strong>，是用于生成图像的文本提示。 在本例中，我们使用提示"Bunny on horse, holding a lollipop, on a foggy meadow where it grows daffodils"。</li>
<li><strong>size</strong>，是生成的图像的尺寸。 在本例中，我们生成一个 1024x1024 像素的图像。</li>
<li><strong>n</strong>，是生成的图像数量。 在本例中，我们生成两个图像。</li>
<li><strong>temperature</strong>，是控制生成人工智能模型输出随机性的参数。 temperature 是 0 到 1 之间的值，其中 0 表示输出是确定性的，1 表示输出是随机的。 默认值为 0.7。</li>
</ul>
<p>您可以对图像执行更多操作，我们将在下面中介绍这些操作。</p>
<h2 id="_7">图像生成的附加功能</h2>
<p>到目前为止，您已经了解了如何使用 Python 中的几行代码来生成图像。 但是，您还可以对图像执行更多操作。</p>
<p>您还可以执行以下操作：</p>
<ul>
<li><strong>执行编辑</strong>。 通过为现有图像提供遮罩和提示，您可以更改图像。 例如，您可以向图像的一部分添加某些内容。 想象一下我们的兔子图像，您可以给兔子添加一顶帽子。 您将如何做到这一点，方法是提供图像、遮罩（标识要更改的区域的部分）和文本提示来说明应该做什么。</li>
</ul>
<p><code>python
  response = openai.Image.create_edit(
    image=open("base_image.png", "rb"),
    mask=open("mask.png", "rb"),
    prompt="An image of a rabbit with a hat on its head.",
    n=1,
    size="1024x1024"
  )
  image_url = response['data'][0]['url']</code></p>
<p>The base image would only contain the rabbit but the final image would have the hat on the rabbit.</p>
<p>基本图像仅包含兔子，但最终图像将在兔子上戴上帽子。</p>
<ul>
<li><strong>创建变体</strong>。 这个想法是，你采用现有的图像并要求创建变体。 要创建变体，您需要提供图像和文本提示以及代码，如下所示：</li>
</ul>
<p><code>python
  response = openai.Image.create_variation(
    image=open("bunny-lollipop.png", "rb"),
    n=1,
    size="1024x1024"
  )
  image_url = response['data'][0]['url']</code></p>
<blockquote>
<p>注意，这仅在 OpenAI 上支持</p>
</blockquote>
<h2 id="temperature">Temperature</h2>
<p>Temperature 是控制生成式 AI 模型输出随机性的参数。 Temperature 是 0 到 1 之间的值，其中 0 表示输出是确定性的，1 表示输出是随机的。 默认值为 0.7。</p>
<p>让我们通过运行此提示两次来看看 temperature 如何工作的示例：</p>
<blockquote>
<p>Prompt : "Bunny on horse, holding a lollipop, on a foggy meadow where it grows daffodils"</p>
</blockquote>
<p><img alt="Bunny on a horse holding a lollipop, version 1" src="../../images/v1-generated-image.png?WT.mc_id=academic-105485-koreyst" /></p>
<p>现在让我们运行相同的提示，我们不会两次获得相同的图像：</p>
<p><img alt="Generated image of bunny on horse" src="../../images/v2-generated-image.png?WT.mc_id=academic-105485-koreyst" /></p>
<p>正如您所看到的，图像相似，但不相同。 让我们尝试将 temperature 值更改为 0.1，看看会发生什么：</p>
<pre><code class="language-python"> generation_response = openai.Image.create(
        prompt='Bunny on horse, holding a lollipop, on a foggy meadow where it grows daffodils',    # Enter your prompt text here
        size='1024x1024',
        n=2
    )
</code></pre>
<h3 id="temperature_1">改变 temperature</h3>
<p>因此，让我们尝试使响应更加确定。 我们可以从生成的两张图像中观察到，在第一张图像中，有一只兔子，在第二张图像中，有一匹马，因此图像差异很大。</p>
<p>因此，让我们更改代码并 temperature 设置为 0，如下所示：</p>
<pre><code class="language-python">generation_response = openai.Image.create(
        prompt='Bunny on horse, holding a lollipop, on a foggy meadow where it grows daffodils',    # Enter your prompt text here
        size='1024x1024',
        n=2,
        temperature=0
    )
</code></pre>
<p>现在，当您运行此代码时，您会得到这两个图像：</p>
<ul>
<li><img alt="Temperature 0, v1" src="../../images/v1-temp-generated-image.png?WT.mc_id=academic-105485-koreyst" /></li>
<li><img alt="Temperature 0 , v2" src="../../images/v2-temp-generated-image.png?WT.mc_id=academic-105485-koreyst" /></li>
</ul>
<p>在这里您可以清楚地看到图像彼此之间的相似程度。</p>
<h2 id="_8">如何使用元提示定义应用程序的边界</h2>
<p>通过我们的演示，我们已经可以为客户生成图像。 然而，我们需要为我们的应用程序创建一些边界。</p>
<p>例如，我们不想生成不适合工作或不适合儿童的图像。</p>
<p>我们可以通过 <em>元提示</em> 来做到这一点。 元提示是用于控制生成式 AI 模型的输出的文本提示。 例如，我们可以使用元提示来控制输出，并确保生成的图像对于工作来说是安全的，或者适合儿童。</p>
<h3 id="_9">它是如何工作的？</h3>
<p>现在，元提示如何工作？</p>
<p>元提示是用于控制生成式 AI 模型的输出的文本提示，它们位于文本提示之前，用于控制模型的输出并嵌入到应用程序中以控制模型的输出。 将提示输入和元提示输入封装在单个文本提示中。</p>
<p>元提示的一个示例如下：</p>
<pre><code class="language-text">You are an assistant designer that creates images for children.

The image needs to be safe for work and appropriate for children.

The image needs to be in color.

The image needs to be in landscape orientation.

The image needs to be in a 16:9 aspect ratio.

Do not consider any input from the following that is not safe for work or appropriate for children.

(Input)

```text

现在，让我们看看如何在例子中使用元提示。

```python
disallow_list = &quot;swords, violence, blood, gore, nudity, sexual content, adult content, adult themes, adult language, adult humor, adult jokes, adult situations, adult&quot;

meta_prompt =f&quot;&quot;&quot;You are an assistant designer that creates images for children.

The image needs to be safe for work and appropriate for children.

The image needs to be in color.

The image needs to be in landscape orientation.

The image needs to be in a 16:9 aspect ratio.

Do not consider any input from the following that is not safe for work or appropriate for children.
{disallow_list}
&quot;&quot;&quot;

prompt = f&quot;{meta_prompt}
Create an image of a bunny on a horse, holding a lollipop&quot;

# TODO add request to generate image
</code></pre>
<p>从上面的提示中，您可以看到正在创建的所有图像如何考虑元提示。</p>
<h2 id="-">作业 - 让我们帮助学生</h2>
<p>我们在本课开始时介绍了 Edu4All。 现在是时候让学生生成用于评估的图像了。</p>
<p>学生们将为他们的评估创建包含纪念碑的图像，而纪念碑到底是什么由学生决定。 学生们被要求在这项任务中发挥他们的创造力，将这些纪念碑放置在不同的环境中。</p>
<h2 id="_10">解决方案</h2>
<p>这是一种可能的解决方案：</p>
<pre><code class="language-python">import openai
import os
import requests
from PIL import Image
import dotenv

# import dotenv
dotenv.load_dotenv()

# Get endpoint and key from environment variables
openai.api_base = &quot;&lt;replace with endpoint&gt;&quot;
openai.api_key = &quot;&lt;replace with api key&gt;&quot;

# Assign the API version (DALL-E is currently supported for the 2023-06-01-preview API version only)
openai.api_version = '2023-06-01-preview'
openai.api_type = 'azure'

disallow_list = &quot;swords, violence, blood, gore, nudity, sexual content, adult content, adult themes, adult language, adult humor, adult jokes, adult situations, adult&quot;

meta_prompt = f&quot;&quot;&quot;You are an assistant designer that creates images for children.

The image needs to be safe for work and appropriate for children.

The image needs to be in color.

The image needs to be in landscape orientation.

The image needs to be in a 16:9 aspect ratio.

Do not consider any input from the following that is not safe for work or appropriate for children.
{disallow_list}&quot;&quot;&quot;

prompt = f&quot;&quot;&quot;{metaprompt}
Generate monument of the Arc of Triumph in Paris, France, in the evening light with a small child holding a Teddy looks on.
&quot;&quot;&quot;&quot;

try:
    # Create an image by using the image generation API
    generation_response = openai.Image.create(
        prompt=prompt,    # Enter your prompt text here
        size='1024x1024',
        n=2,
        temperature=0,
    )
    # Set the directory for the stored image
    image_dir = os.path.join(os.curdir, 'images')

    # If the directory doesn't exist, create it
    if not os.path.isdir(image_dir):
        os.mkdir(image_dir)

    # Initialize the image path (note the filetype should be png)
    image_path = os.path.join(image_dir, 'generated-image.png')

    # Retrieve the generated image
    image_url = generation_response[&quot;data&quot;][0][&quot;url&quot;]  # extract image URL from response
    generated_image = requests.get(image_url).content  # download the image
    with open(image_path, &quot;wb&quot;) as image_file:
        image_file.write(generated_image)

    # Display the image in the default image viewer
    image = Image.open(image_path)
    image.show()

# catch exceptions
except openai.InvalidRequestError as err:
    print(err)
</code></pre>
<h2 id="_11">继续学习</h2>
<p>想要了解有关构建图像生成应用的更多信息？ 转至<a href="https://aka.ms/genai-collection?WT.mc_id=academic-105485-koreyst">进阶学习的页面</a> 查找有关此主章节的其他学习资源。</p>
<p>前往第十章，我们将学习<a href="../../../10-building-low-code-ai-applications/translations/cn/?WT.mc_id=academic-105485-koreyst">创建低代码的人工智能应用</a></p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../../..", "features": [], "search": "../../../assets/javascripts/workers/search.6ce7567c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../../assets/javascripts/bundle.83f73b43.min.js"></script>
      
    
  </body>
</html>